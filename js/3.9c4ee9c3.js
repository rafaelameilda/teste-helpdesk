(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"25dd":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-pa-sm q-gutter-sm"},[a("q-toolbar",{class:t.$q.dark.isActive?"shadow bg-dark text-white rounded-borders":"rounded-borders bg-deep-orange-6  text-white text-subtitle1"},[t._v("\n    Abrir uma Nova Solicitação\n\n    "),a("q-space")],1),a("q-card",[a("q-card-section",[a("fieldset",[a("div",{staticClass:"row q-col-gutter-x-xs q-col-gutter-y-lg"},[a("cc-input",{staticClass:"col-12 col-lg-4 col-md-4",attrs:{color:t.$q.dark.isActive?"white":"grey",label:"Categoria",required:!0,readonly:!0},model:{value:t.ticket.categoria,callback:function(e){t.$set(t.ticket,"categoria",e)},expression:"ticket.categoria"}}),a("cc-input",{staticClass:"col-12 col-lg-4 col-md-4",attrs:{readonly:!0,required:!0,color:t.$q.dark.isActive?"white":"grey",label:"Sub-Categoria"},model:{value:t.ticket.subCategoria,callback:function(e){t.$set(t.ticket,"subCategoria",e)},expression:"ticket.subCategoria"}}),a("cc-input-container",{staticClass:"col-12 col-lg-4 col-md-4",attrs:{required:!0,label:"Prioridade"}},[a("q-select",{staticClass:"field-container-content",attrs:{dense:"",color:t.$q.dark.isActive?"white":"grey-9",outlined:"","use-chips":"","option-label":"label",options:t.prioriadeOptions},model:{value:t.ticket.prioridade,callback:function(e){t.$set(t.ticket,"prioridade",e)},expression:"ticket.prioridade"}})],1),a("cc-input",{staticClass:"col-12 col-lg-12 col-md-12",attrs:{required:!0,color:t.$q.dark.isActive?"white":"grey",label:"Título"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.pesquisar(e)}},model:{value:t.ticket.title,callback:function(e){t.$set(t.ticket,"title",e)},expression:"ticket.title"}}),a("r-editor",{staticClass:"col-12 col-lg-12 col-md-12",attrs:{color:"red"},model:{value:t.ticket.description,callback:function(e){t.$set(t.ticket,"description",e)},expression:"ticket.description"}})],1),a("q-card-section",[a("q-separator"),a("q-card-actions",[a("q-btn",{attrs:{color:t.$q.dark.isActive?"white":"positive",outline:"",loading:t.submitting,icon:"fas fa-paper-plane",label:"Enviar","no-caps":""},on:{click:t.enviarChamado},scopedSlots:t._u([{key:"loading",fn:function(){return[a("q-spinner-facebook")]},proxy:!0}])},[a("q-tooltip",{attrs:{"transition-show":"rotate","transition-hide":"rotate","content-class":"bg-accent"}},[t._v("Enviar Chamado")])],1),a("q-btn",{attrs:{to:"/new-ticket","no-caps":"",outline:"",color:t.$q.dark.isActive?"grey-6":"negative",icon:"fas fa-ban",label:"Cancelar"}},[a("q-tooltip",{attrs:{"transition-show":"rotate","transition-hide":"rotate","content-class":"bg-accent"}},[t._v("Cancelar e Voltar")])],1),a("q-btn",{attrs:{"no-caps":"",outline:"",color:t.$q.dark.isActive?"grey-6":"info",icon:"fas fa-paperclip",label:"Anexos"},on:{click:function(e){t.uploadAnexo=!t.uploadAnexo}}},[a("q-tooltip",{attrs:{"transition-show":"rotate","transition-hide":"rotate","content-class":"bg-accent"}},[t._v("Anexar Arquivos ao Chamado")])],1)],1),t.uploadAnexo?a("div",{staticClass:"row"},[a("q-uploader",{ref:"teste",staticClass:"col-12 col-lg-12 col-md-12",attrs:{"auto-upload":"",color:t.$q.dark.isActive?"grey-6":"light-blue",label:"Anexar Arquivos ","field-name":"files",factory:t.factoryFn,multiple:"",batch:""},on:{uploaded:t.upload,failed:t.failed}})],1):t._e()],1)],1)])],1)],1)},o=[],s=(a("551c"),a("06db"),a("a34a")),r=a.n(s),n=(a("96cf"),a("c973")),c=a.n(n),l=a("bb5b"),d=a("9962"),u=a("b4db"),p={name:"FormularioNewticketPadrao",data:function(){return{ticket:{description:"",prioridade:{label:"Baixa",value:"B"}},prioriadeOptions:[{label:"Baixa",value:"B"},{label:"Média",value:"M"},{label:"Alta",value:"A"},{label:"Crítica",value:"C"}],submitting:!1,loading:!1,uploadAnexo:!1}},methods:{enviarChamado:function(){var t=this;return c()(r.a.mark((function e(){var a,i,o;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!t.validarFormulario()){e.next=11;break}return t.prepareToSendTicket(),a="/ticket/new",e.next=6,t.$axios.post(a,{params:t.ticket});case 6:i=e.sent,t.submitting=!1,t.loading=!1,t.exibirMensagem(i.data,"success","Chamado Criado com Sucesso!"),t.$router.push("/new-ticket");case 11:e.next=19;break;case 13:e.prev=13,e.t0=e["catch"](0),o=e.t0.response?e.t0.response.data.message:"Sem comucação com servidor",t.exibirMensagem(o,"error","Erro"),t.submitting=!1,t.loading=!1;case 19:case"end":return e.stop()}}),e,null,[[0,13]])})))()},showMsg:function(t,e,a){this.$q.notify({message:"".concat(t," ").concat(e),type:a,position:"top"})},validarFormulario:function(){return this.ticket.title?!!this.ticket.description||(this.showMsg("Descrição"," deve ser informada","warning"),!1):(this.showMsg("Titulo"," deve ser informado","warning"),!1)},exibirMensagem:function(t,e,a){this.$q.dialog({component:l["a"],message:t,html:!0,type:e,title:a})},prepareToSendTicket:function(){this.submitting=!0,this.loading=!0,this.ticket.categoria={label:this.$store.state.Ticket.items.codCategoria.label,value:this.$store.state.Ticket.items.codCategoria.value},this.ticket.subCategoria={label:this.$store.state.Ticket.items.label,value:this.$store.state.Ticket.items.codSubCategoria}},factoryFn:function(){return new Promise((function(t,e){var a=d["a"].getUserFromLocalStorage();t({url:u["a"].baseURL+"/upload-files",method:"POST",headers:[{name:"Authorization",value:"Bearer ".concat(a.token)}]})}))},upload:function(t){this.ticket.files=JSON.parse(t.xhr.response);var e="Arquivo/s adicionado com sucesso.";this.showMsg(e,"","positive")},failed:function(t){this.showMsg(t.xhr,"","negative")}},created:function(){this.$store.state.Ticket.items.label?(this.ticket.categoria=this.$store.state.Ticket.items.codCategoria.label,this.ticket.subCategoria=this.$store.state.Ticket.items.label):this.$router.push("/new-ticket")}},f=p,h=(a("d0a9"),a("2877")),g=a("9989"),b=a("65c6"),m=a("2c91"),k=a("f09f"),v=a("a370"),C=a("ddd8"),w=a("eb85"),q=a("4b7e"),x=a("9c40"),$=a("e669"),y=a("05c0"),A=a("ee89"),S=a("eebe"),_=a.n(S),T=Object(h["a"])(f,i,o,!1,null,"598847e8",null);e["default"]=T.exports;_()(T,"components",{QPage:g["a"],QToolbar:b["a"],QSpace:m["a"],QCard:k["a"],QCardSection:v["a"],QSelect:C["a"],QSeparator:w["a"],QCardActions:q["a"],QBtn:x["a"],QSpinnerFacebook:$["a"],QTooltip:y["a"],QUploader:A["a"]})},"37dc":function(t,e,a){"use strict";var i=a("d062"),o=a.n(i);o.a},"98ab":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"alert",staticClass:"alert"},[a("div",{staticClass:"left"},[a("span",{staticClass:"border",class:"bg-"+t.color}),a("span",{staticClass:"icon",class:t.color},[a("q-icon",{attrs:{name:t.icon}})],1)]),a("div",{staticClass:"content"},[a("div",{staticClass:"msg"},[a("span",{staticClass:"title"},[t._v(t._s(t.title))]),a("span",{staticClass:"caption"},[t._v(t._s(t.caption))])]),a("div",{staticClass:"close"},[a("button",{on:{click:t.close}},[a("i",{staticClass:"material-icons q-icon notranslate",attrs:{"aria-hidden":"true",role:"img"}},[t._v("close")])])])])])},o=[],s={props:{caption:String,title:String,type:{type:String,default:"info"}},mounted:function(){},methods:{close:function(){this.$refs.alert.remove(),this.$emit("close")}},computed:{icon:function(){switch(this.type){case"info":return"info";case"warn":return"warning";case"error":return"error";case"help":return"help";case"success":return"check_circle";default:return"info"}},color:function(){switch(this.type){case"info":return"info";case"warn":return"warn";case"error":return"error";case"help":return"help";case"success":return"success";default:return"info"}}}},r=s,n=(a("37dc"),a("2877")),c=a("0016"),l=a("eebe"),d=a.n(l),u=Object(n["a"])(r,i,o,!1,null,"b8d0040e",null);e["a"]=u.exports;d()(u,"components",{QIcon:c["a"]})},bb5b:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{ref:"dialog",attrs:{"full-width":t.fullWidth},on:{hide:t.onDialogHide}},[a("q-card",{staticClass:"q-dialog-plugin",style:t.getSize},[a("Alert",{staticClass:"full-width",attrs:{title:t.title,caption:t.message,type:t.type},on:{close:t.onCancelClick}})],1)],1)},o=[],s=a("98ab"),r={components:{Alert:s["a"]},props:{message:String,title:String,fullWidth:Boolean,size:{type:String,default:"md"},type:String,detail:Boolean,color:{type:String,default:"bg-negative"}},computed:{getSize:function(){if("md"===this.size)return[{width:"700px"},{"max-width":"80vw"}]}},methods:{show:function(){this.$refs.dialog.show()},hide:function(){this.$refs.dialog.hide()},onDialogHide:function(){this.$emit("hide")},onOKClick:function(){this.$emit("ok"),this.hide()},onDetailClick:function(){this.$emit("detail")},onCancelClick:function(){this.hide()}}},n=r,c=a("2877"),l=a("24e8"),d=a("f09f"),u=a("eebe"),p=a.n(u),f=Object(c["a"])(n,i,o,!1,null,null,null);e["a"]=f.exports;p()(f,"components",{QDialog:l["a"],QCard:d["a"]})},d062:function(t,e,a){},d0a9:function(t,e,a){"use strict";var i=a("f664"),o=a.n(i);o.a},f664:function(t,e,a){}}]);