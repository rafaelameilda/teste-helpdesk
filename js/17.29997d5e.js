(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{"69c2":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-pa-sm q-gutter-sm shadow"},[a("div",{staticClass:"q-px-lg q-pb-md"},[a("div",{staticClass:"q-pa-sm q-gutter-sm"},[a("q-btn",{attrs:{label:"Atividades"},on:{click:t.showModal}})],1),a("q-timeline",{attrs:{color:"secondary"}},[a("q-timeline-entry",{attrs:{heading:"",body:"Time-Line do Chamado"}}),t._l(t.timeline,(function(e){return a("q-timeline-entry",{key:e.id,staticClass:"cursor-pointer",attrs:{color:"alta"===e.prioridade?"negative":"",title:e.title,subtitle:e.dtlanc,icon:e.icone,body:e.body},on:{click:function(a){return t.clickTimeLine(e)}}},[a("q-tooltip",[t._v("Lançado por: "+t._s(e.nomelanc)+" ")])],1)}))],2)],1),a("q-dialog",{attrs:{"transition-show":"scale","transition-hide":"scale",persistent:""},model:{value:t.modalFilters,callback:function(e){t.modalFilters=e},expression:"modalFilters"}},[a("q-card",{staticStyle:{width:"950px","max-width":"85vw"}},[a("q-card-section",{class:t.$q.dark.isActive?"shadow bg-dark text-white":"bg-color1 text-white"},[a("div",{staticClass:"text-h6"},[t._v("Lançar TimeLine das Atividades")])]),a("q-card-section",[a("fieldset",[a("legend",{},[a("q-toolbar",[a("q-toolbar-title",[t._v("Informe o andamento dos Títulos")])],1)],1),a("div",{staticClass:"row q-col-gutter-x-xs q-col-gutter-y-lg"},[a("q-select",{staticClass:"col-12 col-lg-12 col-md-12",attrs:{outlined:"",options:t.options,label:"Titulos"},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}}),a("q-input",{staticClass:"col-12 col-lg-12 col-md-12",attrs:{outlined:"",autogrow:""},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1)])]),a("q-separator"),a("q-card-actions",{class:t.$q.dark.isActive?"bg-dark text-white":"bg-color1 text-white",attrs:{align:"right"}},[a("q-btn",{attrs:{flat:"",label:"Cancelar","no-caps":""},on:{click:function(e){t.modalFilters=!1}}}),a("q-btn",{attrs:{flat:"",label:"Lançar","no-caps":""},on:{click:t.lancar}}),a("q-btn",{attrs:{flat:"",label:"Novo Título","no-caps":""},on:{click:t.prompt}})],1)],1)],1)],1)},n=[],o=a("a34a"),l=a.n(o),s=(a("20d6"),a("96cf"),a("c973")),r=a.n(s),c=a("4f1f"),d=a("5299"),u={name:"TimeLine",computed:{},data:function(){return{id:null,modalFilters:!1,text:"",newTitle:"",timeline:[],options:[],model:null,loading:!1}},methods:{carregaOptions:function(){this.options=this.timeline.map((function(t){return t.title}))},showModal:function(){this.modalFilters=!0,this.carregaOptions()},prompt:function(){var t=this;this.$q.dialog({title:"Novo Título",message:"Qual a nova atividade ?",prompt:{model:"",type:"text"},cancel:!0,persistent:!0}).onOk((function(e){t.options.push(e),t.newTitle=e})).onCancel((function(){})).onDismiss((function(){}))},lancar:function(){var t=this;return r()(l.a.mark((function e(){var a,i,n;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a={title:t.model,dtlanc:String(new Date),body:t.text,icone:"fas fa-arrow-down",id:t.id},i=t.timeline.findIndex((function(e){return e.title===t.model})),!(i>=0)){e.next=8;break}return n={icone:"fas fa-arrow-down",id:t.id,body:t.timeline[i].body+" || "+a.body,timelineId:t.timeline[i].id},e.next=6,c["a"].updateTimeLine(n);case 6:e.next=10;break;case 8:return e.next=10,c["a"].insertNewTimeLine(a);case 10:t.model="",t.text="",t.modalFilters=!1,t.loadTimeLine();case 14:case"end":return e.stop()}}),e)})))()},loadTimeLine:function(){var t=this;return r()(l.a.mark((function e(){var a,i;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,c["a"].loadTimeLines({id:t.id});case 4:a=e.sent,t.timeline=a.data,t.loading=!1,e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](0),i=e.t0.response?e.t0.response.data.message:"Sem comucação com servidor",t.exibirMensagem(i);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()},exibirMensagem:function(t){this.$q.dialog({component:d["a"],message:t,html:!0,title:"Erro"})},clickTimeLine:function(t){console.log(t)}},mounted:function(){var t=this;return r()(l.a.mark((function e(){return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.id=t.$route.params.id,t.loadTimeLine();case 2:case"end":return e.stop()}}),e)})))()},watch:{}},m=u,p=a("2877"),f=a("9989"),b=a("9c40"),h=a("05eb"),w=a("74af"),g=a("05c0"),v=a("24e8"),x=a("f09f"),q=a("a370"),k=a("65c6"),T=a("6ac5"),y=a("ddd8"),Q=a("27f9"),C=a("eb85"),L=a("4b7e"),F=a("eebe"),_=a.n(F),S=Object(p["a"])(m,i,n,!1,null,null,null);e["default"]=S.exports;_()(S,"components",{QPage:f["a"],QBtn:b["a"],QTimeline:h["a"],QTimelineEntry:w["a"],QTooltip:g["a"],QDialog:v["a"],QCard:x["a"],QCardSection:q["a"],QToolbar:k["a"],QToolbarTitle:T["a"],QSelect:y["a"],QInput:Q["a"],QSeparator:C["a"],QCardActions:L["a"]})}}]);